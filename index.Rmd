---
title: "A3: SPL Library Checkouts"
output: html_document
---
```{r, echo = FALSE}
jg_df <- read.csv("John_Green_Checkouts.csv", stringsAsFactors = FALSE)
```

### Introduction
Using the Seattle Public Library data, I chose to analyze the books by John Green that were checked out in Seattle. I chose this author because he was very popular when I was younger, and I wanted to understand how popular his books have been recently. I was also curious about whether certain factors related to the level of popularity of his books. This leads me to my main research question:

- *How popular has John Green's books been from 2006 to 2022?*

In order to do so, I will focus on the **Checkouts**, **Title**, **Subjects**, **CheckoutYear**, **CheckoutMonth**, **Publisher**, and **MaterialType** when calculating summary statistics. In addition to these variables, I will also be using the **Publisher Year** when creating data visualizations to analyze the following trends:

- *How have the most checked out books written by John Green changed overtime?*
- *How does the number of John Green's books that were published correlate to the number of John Green's books that were checked out overtime?*
- *How has the popularity of John Green's books' genres changed overtime?*

### Summary Information
```{r, echo = FALSE, warning = FALSE, message = FALSE, code = readLines("summary.R")}
```
In order to assess John Green's popularity throughout the years and factors that may be associated with his popularity, I calculated summary statistics that use the variables specified above. First, I found that the book written by John Green with the most number of checkouts in Seattle from 2006 to 2022 was `r book_most_checkouts`. This helps me understand John Green's most popular book. Then, I calculated the most popular genre that John Green writes for by calculating the number of checkouts per genre. The genre with the most checkouts is `r genre_most_checkouts`. Regarding the time period when John Green's books were most popular, I calculated the month and year when the most John Green books were checked out, which is `r date_most_checkouts`. As for the publishing company, I found that the most checkouts of books written by John Green were published by `r publish_cmpny_most_checkout`. Finally, most of John Green's book checkouts were checked out as an `r most_medium`.

### The Dataset

> Who collected/published the data?  

- The Seattle Public Library created and published the data. (My custom dataframe uses this data, but it is filtered to only include entries whose creator matches "John Green".)
  
> What are the parameters of the data (dates, number of checkouts, kinds of books, etc.)?

- The parameters of the data are listed below:
  - UsageClass (whether a check out was digital or physical)
  - CheckoutType (the vendor tool used for the check out)
  - MaterialType (the medium of the check out)
  - CheckoutYear
  - CheckoutMonth    
  - Checkouts (number of check outs of the item)
  -Title (of the item check out)
  -ISBN
  - Creator
  - Subjects (genres of the item)
  - Publisher
  - PublicationYear
  
> How was the data collected or generated?  

- The digital check out data was collected through the Seattle Public Library's vendors (who are Overdrive, hoopla, Freegal, and RBDigital). Data on physical check outs was collected from the Legrady artwork data archives from 2005 to 2016 and from the Horizon ILS since 2016.

> Why was the data collected?  

- According to Seattle's Open Data website, data is published by the city's departments and put into their Open Data program. This Open Data program was created to make data collected by Seattle to be easily accessible to the public. They wanted the availability of the data to increase Seattle's quality of life and promote a supportive and beneficial community to its residents that is constantly finding ways to self-improve.

> What, if any, ethical questions do you need to consider when working with this data? 

- One ethical question to consider is how the Seattle Public Library alerted its users that their data was being collected. Although the data remains anonymous, users of the library may not be comfortable with their check out information being collected as the items' subjects can read into the users' personal interests or political beliefs. Considering how many websites force a user to accept their terms and conditions in order to use the website, the library may follow a similar policy for users to check out items. This means that for users who require the use of the library's items, they would be forced into having their data being collected.

> What are possible limitations or problems with this data?

- One limitation of the data is that it does not record renewal check outs and only records the initial check out. This means that the data is likely to have underestimated the number of total check outs per month as it is common for users to extend their time limit. 

- Another problem of the data is that it is messy due to its variation in sources. The different sources used by the data means that information may have been collected using different methods or different types of data were collected. For example, the source for the physical check outs changed during 2016, so some entries have blank fields meaning the data is inconsistent depending on what time frame is being viewed. Furthermore, the original dataset is messy as some of the entries use unreadable characters, which may have resulted when the data was transferred from archives or media vendors. The format of the entries also differs (such as when looking at the Publication Year column) which can make filtering for a certain data value difficult. This also includes book titles that are written with or without a "The" (such as "The Fault in Our Stars") and titles written in English or Spanish.

- A third problem relates to the Subjects column. The subject of each entry is a string of subjects. This means that each subject entry does not pertain to one unique subject. For example, when looking at the subjects for the book titled "An Abundance of Katherines" and comparing it to "Paper Towns", the entire subject entry itself is different. However, it is only after actually reading each subject that we are able to find that both books share Young Adult Fiction as a subject. 

- Lastly, in my filtered dataset, the creator is filtered to "John Green", but this doesn't mean that all creators are the same person. This means that creators who share the same name are included in this dataset, so I need to further clean the data to only include items created by the American author John Green. 

THINGS TO THINK ABOUT WHEN USING DATA:
- Subjects, need to use string detect
- Title - format not same
- Not all same John Green
- The dataset is each item checked out per month, so repeated titles

### First Trends Over Time Chart

Include a chart. Make sure to describe why you included the chart, and what patterns emerged

The first chart that you will create and include will show the trend over time of your variable/topic/interest. Think carefully about what you want to communicate to your user (you may have to find relevant trends in the dataset first!). Here are some requirements to help guide your design:

- Show more than one, but fewer than ~10 trends
  - For example, two books, or 5 different mediums
- You must have clear x and y axis labels
- The chart needs a clear title 
- You need a legend for your different line colors and a clear - legend title
In your .Rmd file, make sure to describe why you included the chart, and what patterns emerged

When we say "clear" or "human readable" titles and labels, that means that you should not just display the variable name.

Here's an example of how to run an R script inside an RMarkdown file:

``````{r, echo = FALSE, warning = FALSE, code = readLines("chart1_example.R")}
```

### Second Trends Over Time Chart

Include a chart. Make sure to describe why you included the chart, and what patterns emerged

The second chart that you will create and include will show another trend over time of your variable/topic/interest. Think carefully about what you want to communicate to your user (you may have to find relevant trends in the dataset first!). Here are some requirements to help guide your design:

- Show more than one, but fewer than ~10 trends
  - For example, two books, or 5 different mediums
- You must have clear x and y axis labels
- The chart needs a clear title 
- You need a legend for your different line colors and a clear - legend title
In your .Rmd file, make sure to describe why you included the chart, and what patterns emerged

When we say "clear" or "human readable" titles and labels, that means that you should not just display the variable name.

Here's an example of how to run an R script inside an RMarkdown file:

``````{r, echo = FALSE, code = readLines("chart2_example.R")}
```

### Your Choice

The last chart is up to you. It could be a line plot, scatter plot, histogram, bar plot, stacked bar plot, and more. Here are some requirements to help guide your design:

- You must have clear x and y axis labels
- The chart needs a clear title 
- You need a legend for your different line colors and a clear legend title

Here's an example of how to run an R script inside an RMarkdown file:

``````{r, echo = FALSE, code = readLines("chart2_example.R")}
```


